{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/USUARIO/Documents/marcos/visual-studio/react/movie-app-master/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/USUARIO/Documents/marcos/visual-studio/react/movie-app-master/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/USUARIO/Documents/marcos/visual-studio/react/movie-app-master/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect}from\"react\";import axios from\"axios\";import\"./App.css\";import{useState}from\"react\";import SearchBar from\"./Components/SearchBar\";import MovieTrailer from\"./Components/MovieTrailer\";import MovieList from\"./Components/MovieList\";import Header from\"./Components/Header\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var API_URL=\"https://api.themoviedb.org/3\";var API_KEY=\"4f5f43495afcc67e9553f6c684a82f84\";var IMAGE_PATH=\"https://image.tmdb.org/t/p/original\";// variables de estado\nvar _useState=useState([]),_useState2=_slicedToArray(_useState,2),movies=_useState2[0],setMovies=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),searchKey=_useState4[0],setSearchKey=_useState4[1];//const [selectedMovie, setSelectedMovie] = useState({})\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),trailer=_useState6[0],setTrailer=_useState6[1];var _useState7=useState({title:\"Loading Movies\"}),_useState8=_slicedToArray(_useState7,2),movie=_useState8[0],setMovie=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),playing=_useState10[0],setPlaying=_useState10[1];// funcion para realizar la peticion get a la api\nvar fetchMovies=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(searchKey){var type,_yield$axios$get,results;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:type=searchKey?\"search\":\"discover\";_context.next=3;return axios.get(\"\".concat(API_URL,\"/\").concat(type,\"/movie\"),{params:{api_key:API_KEY,query:searchKey}});case 3:_yield$axios$get=_context.sent;results=_yield$axios$get.data.results;//console.log('data',results);\n//setSelectedMovie(results[0])\nsetMovies(results);setMovie(results[0]);if(!results.length){_context.next=10;break;}_context.next=10;return fetchMovie(results[0].id);case 10:case\"end\":return _context.stop();}}},_callee);}));return function fetchMovies(_x){return _ref.apply(this,arguments);};}();// funcion para la peticion de un solo objeto y mostrar en reproductor de videos\nvar fetchMovie=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var _yield$axios$get2,data,_trailer;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get(\"\".concat(API_URL,\"/movie/\").concat(id),{params:{api_key:API_KEY,append_to_response:\"videos\"}});case 2:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;if(data.videos&&data.videos.results){_trailer=data.videos.results.find(function(vid){return vid.name===\"Official Trailer\";});setTrailer(_trailer?_trailer:data.videos.results[0]);}//return data\nsetMovie(data);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchMovie(_x2){return _ref2.apply(this,arguments);};}();var selectMovie=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(movie){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// const data = await fetchMovie(movie.id)\n// console.log(data);\n// setSelectedMovie(movie)\nfetchMovie(movie.id);setMovie(movie);window.scrollTo(0,0);case 3:case\"end\":return _context3.stop();}}},_callee3);}));return function selectMovie(_x3){return _ref3.apply(this,arguments);};}();// funcion para buscar peliculas\nvar searchMovies=function searchMovies(e){e.preventDefault();fetchMovies(searchKey);};useEffect(function(){fetchMovies();},[]);function functionSetSearchBar(value){setSearchKey(value);console.log(searchKey);}function functionSetPlaying(value){setPlaying(value);}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{functionSetSearchBar:functionSetSearchBar,searchMovies:searchMovies}),/*#__PURE__*/_jsx(MovieTrailer,{trailer:trailer,IMAGE_PATH:IMAGE_PATH,movie:movie,playing:playing,functionSetPlaying:functionSetPlaying}),/*#__PURE__*/_jsx(MovieList,{movies:movies,IMAGE_PATH:IMAGE_PATH,functionSelectMovie:selectMovie})]});}export default App;","map":{"version":3,"names":["useEffect","axios","useState","SearchBar","MovieTrailer","MovieList","Header","App","API_URL","API_KEY","IMAGE_PATH","movies","setMovies","searchKey","setSearchKey","trailer","setTrailer","title","movie","setMovie","playing","setPlaying","fetchMovies","type","get","params","api_key","query","results","data","length","fetchMovie","id","append_to_response","videos","find","vid","name","selectMovie","window","scrollTo","searchMovies","e","preventDefault","functionSetSearchBar","value","console","log","functionSetPlaying"],"sources":["C:/Users/USUARIO/Documents/marcos/visual-studio/react/movie-app-master/src/App.js"],"sourcesContent":["import { useEffect } from \"react\";\nimport axios from \"axios\";\nimport \"./App.css\";\nimport { useState } from \"react\";\n\nimport SearchBar from \"./Components/SearchBar\";\nimport MovieTrailer from \"./Components/MovieTrailer\";\nimport MovieList from \"./Components/MovieList\";\nimport Header from \"./Components/Header\";\n\nfunction App() {\n  const API_URL = \"https://api.themoviedb.org/3\";\n  const API_KEY = \"4f5f43495afcc67e9553f6c684a82f84\";\n  const IMAGE_PATH = \"https://image.tmdb.org/t/p/original\";\n\n  // variables de estado\n  const [movies, setMovies] = useState([]);\n  const [searchKey, setSearchKey] = useState(\"\");\n  //const [selectedMovie, setSelectedMovie] = useState({})\n  const [trailer, setTrailer] = useState(null);\n  const [movie, setMovie] = useState({ title: \"Loading Movies\" });\n  const [playing, setPlaying] = useState(false);\n\n  // funcion para realizar la peticion get a la api\n  const fetchMovies = async (searchKey) => {\n    const type = searchKey ? \"search\" : \"discover\";\n    const {\n      data: { results },\n    } = await axios.get(`${API_URL}/${type}/movie`, {\n      params: {\n        api_key: API_KEY,\n        query: searchKey,\n      },\n    });\n    //console.log('data',results);\n    //setSelectedMovie(results[0])\n\n    setMovies(results);\n    setMovie(results[0]);\n\n    if (results.length) {\n      await fetchMovie(results[0].id);\n    }\n  };\n\n  // funcion para la peticion de un solo objeto y mostrar en reproductor de videos\n  const fetchMovie = async (id) => {\n    const { data } = await axios.get(`${API_URL}/movie/${id}`, {\n      params: {\n        api_key: API_KEY,\n        append_to_response: \"videos\",\n      },\n    });\n\n    if (data.videos && data.videos.results) {\n      const trailer = data.videos.results.find(\n        (vid) => vid.name === \"Official Trailer\"\n      );\n      setTrailer(trailer ? trailer : data.videos.results[0]);\n    }\n    //return data\n    setMovie(data);\n  };\n\n  const selectMovie = async (movie) => {\n    // const data = await fetchMovie(movie.id)\n    // console.log(data);\n    // setSelectedMovie(movie)\n    fetchMovie(movie.id);\n\n    setMovie(movie);\n    window.scrollTo(0, 0);\n  };\n\n  // funcion para buscar peliculas\n  const searchMovies = (e) => {\n    e.preventDefault();\n    fetchMovies(searchKey);\n  };\n\n  useEffect(() => {\n    fetchMovies();\n  }, []);\n\n  function functionSetSearchBar(value) {\n    setSearchKey(value);\n    console.log(searchKey);\n  }\n  function functionSetPlaying(value) {\n    setPlaying(value);\n  }\n\n  return (\n    <div>\n      <Header  functionSetSearchBar={functionSetSearchBar}\n        searchMovies={searchMovies}></Header>\n     \n      <MovieTrailer\n        trailer={trailer}\n        IMAGE_PATH={IMAGE_PATH}\n        movie={movie}\n        playing={playing}\n        functionSetPlaying={functionSetPlaying}\n      ></MovieTrailer>\n      <MovieList\n        movies={movies}\n        IMAGE_PATH={IMAGE_PATH}\n        functionSelectMovie={selectMovie}\n      ></MovieList>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"oeAAA,OAASA,SAAT,KAA0B,OAA1B,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAO,WAAP,CACA,OAASC,QAAT,KAAyB,OAAzB,CAEA,MAAOC,UAAP,KAAsB,wBAAtB,CACA,MAAOC,aAAP,KAAyB,2BAAzB,CACA,MAAOC,UAAP,KAAsB,wBAAtB,CACA,MAAOC,OAAP,KAAmB,qBAAnB,C,wFAEA,QAASC,IAAT,EAAe,CACb,GAAMC,QAAO,CAAG,8BAAhB,CACA,GAAMC,QAAO,CAAG,kCAAhB,CACA,GAAMC,WAAU,CAAG,qCAAnB,CAEA;AACA,cAA4BR,QAAQ,CAAC,EAAD,CAApC,wCAAOS,MAAP,eAAeC,SAAf,eACA,eAAkCV,QAAQ,CAAC,EAAD,CAA1C,yCAAOW,SAAP,eAAkBC,YAAlB,eACA;AACA,eAA8BZ,QAAQ,CAAC,IAAD,CAAtC,yCAAOa,OAAP,eAAgBC,UAAhB,eACA,eAA0Bd,QAAQ,CAAC,CAAEe,KAAK,CAAE,gBAAT,CAAD,CAAlC,yCAAOC,KAAP,eAAcC,QAAd,eACA,eAA8BjB,QAAQ,CAAC,KAAD,CAAtC,0CAAOkB,OAAP,gBAAgBC,UAAhB,gBAEA;AACA,GAAMC,YAAW,4FAAG,iBAAOT,SAAP,sJACZU,IADY,CACLV,SAAS,CAAG,QAAH,CAAc,UADlB,uBAIRZ,MAAK,CAACuB,GAAN,WAAahB,OAAb,aAAwBe,IAAxB,WAAsC,CAC9CE,MAAM,CAAE,CACNC,OAAO,CAAEjB,OADH,CAENkB,KAAK,CAAEd,SAFD,CADsC,CAAtC,CAJQ,uCAGRe,OAHQ,kBAGhBC,IAHgB,CAGRD,OAHQ,CAUlB;AACA;AAEAhB,SAAS,CAACgB,OAAD,CAAT,CACAT,QAAQ,CAACS,OAAO,CAAC,CAAD,CAAR,CAAR,CAdkB,IAgBdA,OAAO,CAACE,MAhBM,iDAiBVC,WAAU,CAACH,OAAO,CAAC,CAAD,CAAP,CAAWI,EAAZ,CAjBA,wDAAH,kBAAXV,YAAW,4CAAjB,CAqBA;AACA,GAAMS,WAAU,6FAAG,kBAAOC,EAAP,mLACM/B,MAAK,CAACuB,GAAN,WAAahB,OAAb,mBAA8BwB,EAA9B,EAAoC,CACzDP,MAAM,CAAE,CACNC,OAAO,CAAEjB,OADH,CAENwB,kBAAkB,CAAE,QAFd,CADiD,CAApC,CADN,yCACTJ,IADS,mBACTA,IADS,CAQjB,GAAIA,IAAI,CAACK,MAAL,EAAeL,IAAI,CAACK,MAAL,CAAYN,OAA/B,CAAwC,CAChCb,QADgC,CACtBc,IAAI,CAACK,MAAL,CAAYN,OAAZ,CAAoBO,IAApB,CACd,SAACC,GAAD,QAASA,IAAG,CAACC,IAAJ,GAAa,kBAAtB,EADc,CADsB,CAItCrB,UAAU,CAACD,QAAO,CAAGA,QAAH,CAAac,IAAI,CAACK,MAAL,CAAYN,OAAZ,CAAoB,CAApB,CAArB,CAAV,CACD,CACD;AACAT,QAAQ,CAACU,IAAD,CAAR,CAfiB,wDAAH,kBAAVE,WAAU,8CAAhB,CAkBA,GAAMO,YAAW,6FAAG,kBAAOpB,KAAP,wHAClB;AACA;AACA;AACAa,UAAU,CAACb,KAAK,CAACc,EAAP,CAAV,CAEAb,QAAQ,CAACD,KAAD,CAAR,CACAqB,MAAM,CAACC,QAAP,CAAgB,CAAhB,CAAmB,CAAnB,EAPkB,wDAAH,kBAAXF,YAAW,8CAAjB,CAUA;AACA,GAAMG,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAAO,CAC1BA,CAAC,CAACC,cAAF,GACArB,WAAW,CAACT,SAAD,CAAX,CACD,CAHD,CAKAb,SAAS,CAAC,UAAM,CACdsB,WAAW,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIA,QAASsB,qBAAT,CAA8BC,KAA9B,CAAqC,CACnC/B,YAAY,CAAC+B,KAAD,CAAZ,CACAC,OAAO,CAACC,GAAR,CAAYlC,SAAZ,EACD,CACD,QAASmC,mBAAT,CAA4BH,KAA5B,CAAmC,CACjCxB,UAAU,CAACwB,KAAD,CAAV,CACD,CAED,mBACE,oCACE,KAAC,MAAD,EAAS,oBAAoB,CAAED,oBAA/B,CACE,YAAY,CAAEH,YADhB,EADF,cAIE,KAAC,YAAD,EACE,OAAO,CAAE1B,OADX,CAEE,UAAU,CAAEL,UAFd,CAGE,KAAK,CAAEQ,KAHT,CAIE,OAAO,CAAEE,OAJX,CAKE,kBAAkB,CAAE4B,kBALtB,EAJF,cAWE,KAAC,SAAD,EACE,MAAM,CAAErC,MADV,CAEE,UAAU,CAAED,UAFd,CAGE,mBAAmB,CAAE4B,WAHvB,EAXF,GADF,CAmBD,CAED,cAAe/B,IAAf"},"metadata":{},"sourceType":"module"}